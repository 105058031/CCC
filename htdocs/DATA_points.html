<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Data points</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
 <link href="/../../../dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="icon" href="/../../../dist/components/brandkit/favicon/favicon.ico">
<link href="/../../../dist/css/iids.css" rel="stylesheet" type="text/css">
<link href="/../../../dist/css/responsive.css" rel="stylesheet" type="text/css">
<script src="/../../../scripts/jquery-3.1.0.min.js" type = "text/javascript"></script>
<!-- <link href="../../../css/Jquery-ui.css" rel="stylesheet" type="text/css"> //-->
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.js"></script>
<style>
  .ui-widget-content {
    border: 1px solid #dddddd;
    background: #ffffff;
    color: #333333;
}
.ui-menu .ui-menu-item {
    margin: 0;
    cursor: pointer;
}
.ui-autocomplete {
    position: absolute;
    top: 0;
    left: 0;
}
li {
    display: list-item;
    text-align: -webkit-match-parent;
}
.ui-menu .ui-menu-item-wrapper {
    position: relative;
    padding: 3px 1em 3px .4em;
}


  .ui-widget.ui-widget-content {
    border: 1px solid #c5c5c5;
}

.ui-widget-content {
    border: 1px solid #dddddd;
    background: #ffffff;
    color: #333333;
}

.ui-widget {
    font-family: Arial,Helvetica,sans-serif;
    font-size: 1em;
}

.ui-menu {
    list-style: none;
    padding: 0;
    margin: 0;
    display: block;
    outline: 0;
}



.ui-front {
    z-index: 100;
}
  </style>
<script  type = "text/javascript">
function Do2 () {
return 1.25;
}

function Do1() {
var Plink = Array();
var Plonk = Array();

$.getJSON("/Pull_postgres_aggregate_Consuela.php?argument1=" + document.getElementById("TextBox2").value, function (data) {
     var items = [];
	 var i;
	 for (i = 0; i < data.length; i++)
	 {
	 Plonker_Work_Center[i] = data[i].Work_Center;
	 Plonker_Labor[i] = Number(data[i].Sum_Lab);
	 Plonker_Order[i] = Number(data[i].Order);
	 Plonker_STD[i] = Number(data[i].STD);
	 Plonker_Mat[i] = (data[i].Material);
	 }
	 
var Weuok_Senuhaahs= [];
var seriesData = [];
var stdData = [];
var PushData = [];
var xCategories = [];
var i, j, k, cat, woc, st;


for(i = 0; i < data.length; i++){
     cat = data[i].Order;
     if(xCategories.indexOf(cat) === -1){
        xCategories[xCategories.length] = cat;
     }
}

for(i = 0; i < data.length; i++){
     woc =  Plonker_Work_Center[i];
     if(Weuok_Senuhaahs.indexOf(woc) === -1){
        Weuok_Senuhaahs[Weuok_Senuhaahs.length] = woc;
     }
}
st = 0;
//document.getElementById("donk").innerHTML = xCategories.length + ' Number of WOs';

for ( j = 0; j < (xCategories.length); j++)
			{
				PushData.push(0);
			}

for (k = 0; k < (Weuok_Senuhaahs.length); k++)
{
PushData[k] = [];
	for ( j = 0; j < (xCategories.length); j++)
			{
				PushData[k].push(0);
			}


    for ( j = 0; j < (xCategories.length); j++)
    {
        for (i = 0; i < data.length; i++)
		{
		
		if ((Plonker_Work_Center[i] == Weuok_Senuhaahs[k]) && (Plonker_Order[i] == xCategories[j])) 
		{
		PushData[k][j] = PushData[k][j] + Plonker_Labor[i];
		}
		else
		{
		}
		//XXXXXXXXXXXXXXX        POPULATING THE STANDARD HOURS        XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
		if ((Plonker_Work_Center[i] == Weuok_Senuhaahs[k]) && (Plonker_Order[i] == xCategories[xCategories.length-1]) && (xCategories[j] == xCategories[xCategories.length-1])) 
		{
		st = st + Plonker_STD[i];
		//document.getElementById("donk").innerHTML =  document.getElementById("donk").innerHTML + ' <br> WOrd: '+ Plonker_Order[i] + ' WCen:' + Plonker_Work_Center[i]  + ' i: ' + i + ' j: ' + j + 'k: ' + k + ' </br>' ;
		
		}
		else
		{
		}
		//XXXXXXXXXXXXXXX        POPULATING THE STANDARD HOURS OVER       XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
		
		}
    }
	//document.getElementById("donk").innerHTML = stdData[6]
	//document.getElementById("donk").innerHTML = document.getElementById("donk").innerHTML + ' ' +  Weuok_Senuhaahs[k] + ' ' + PushData[k];
seriesData.push( {name: Weuok_Senuhaahs[k], data:PushData[k] });	

}

		
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'column'
            },
            title: {
                text: document.getElementById("TextBox2").value
            },
            xAxis: {
                categories: xCategories
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Hours'
                },
                stackLabels: {
                    enabled: true,
                    style: {
                        fontWeight: 'bold',
                        color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
                    }
                },
				plotLines: [{
                    
                    color: '#FF0000',
                    dashStyle: 'ShortDash',
                    width: 2,
                    value: st,
                    zIndex: 0,
                    label : {
                        text : 'Standard time'
                    }
                }]
            },
		
            legend: {
                align: 'right',
                x: -100,
                verticalAlign: 'top',
                y: 20,
                floating: true,
                backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColorSolid) || 'white',
                borderColor: '#CCC',
                borderWidth: 1,
                shadow: false
            },
            tooltip: {
                formatter: function() {
                    return '<b>'+ this.x +'</b><br/>'+
                        this.series.name +': '+ this.y +'<br/>'+
                        'Total: '+ this.point.stackTotal;
                }
            },
            plotOptions: {
                column: {
                    stacking: 'normal'
                }
            },
            series: seriesData
        
			
			
        });
    });
    
});
}
</script>
</head>

<div style="background-color: black; width: 1400px" class="navbar-header">
      <a class="navbar-brand" href="../../index.html"><span class="ge-logo"></span> <span>Data points<small><i> on </i> Warrior 8</small></span></a>
      <!-- .navbar-toggle for collapsed navbar content -->
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
</div>
<body bgcolor="#000000">




<div>
<div style="height: 25px;width: 1400px"></div>
<h1 id = "head" style="color:black;font-family: GE Inspira;" > Data points from Warrior</h1>
</div>

<div class="row">
  <div class="col-lg-4" >
    <div class="input-group" style="width: 700px ; margin: 20px 35px 0 35px" >
	 
      <span class="input-group-btn">
        <button id="Go" class="btn btn-default" type="button" onclick="Do1();">Go!</button>
      </span>
      <input id="TextBox2" type="text" class="form-control" placeholder="Search for Assembly...">
	  
    </div><!-- /input-group -->
	
  </div><!-- /.col-lg-6 -->
  
</div><!-- /.row -->

<div style="height: 25px;width: 1400px"></div>
<!--  -->
<!-- <div id ="donk" style="width: 600px ; margin: 20px 35px 0 35px ; font-style:arial" > sd </div> -->
<!--ko-->
<script src="/js/highcharts.js"></script>
<script src="/js/modules/exporting.js" ></script>
<div id="container" style="height: 400px;width: 1270px""></div>

<div style="height: 30px;width: 790px"></div>



<script type = "text/javascript">

var Plonker_Work_Center = Array();
var Plonker_Labor = Array();
var Plonker_Order = Array();
var Plonker_STD = Array();
var Plonker_Mat = Array();
var plonk_str;
plonk_str = "";


$.getJSON("/Pull_postgres_aggregate_Consuela2.php", function (data) {
     var items = [];
	 var i;
	 for (i = 0; i < data.length; i++)
	 
	
	 {
	 Plonker_Work_Center[i] = data[i].Work_Center;
	 Plonker_Labor[i] = Number(data[i].Sum_Lab);
	 Plonker_Order[i] = Number(data[i].Order);
	 Plonker_STD[i] = Number(data[i].STD);
	 Plonker_Mat[i] = (data[i].Material);
	 }
	 

$(function () {


var seriesData = [];
var stdData = [];
var std2Data = [];
var xCategories = [];
var i, cat;
for(i = 0; i < data.length; i++){
     cat = data[i].Order;
     if(xCategories.indexOf(cat) === -1){
        xCategories[xCategories.length] = cat;
     }
}
for(i = 0; i < data.length; i++){
    if(seriesData){
      var currSeries = seriesData.filter(function(seriesObject){ return seriesObject.name == Plonker_Work_Center[i];});
      if(currSeries.length === 0){
          seriesData[seriesData.length] = currSeries = {name: Plonker_Work_Center[i], data: [0]};
      } else {
          currSeries = currSeries[0];
      }
      var index = currSeries.data.length;
      currSeries.data[index] = Plonker_Labor[i];
    } else {
       seriesData[0] = {name: Plonker_Work_Center[i], data: Plonker_Labor[i]}
    }
}


    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'column'
            },
            title: {
                text: Plonker_Mat[1]
            },
            xAxis: {
                categories: xCategories
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Hours'
                },
                stackLabels: {
                    enabled: true,
                    style: {
                        fontWeight: 'bold',
                        color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
                    }
                },
				plotLines: [{
                    
                    color: '#FF0000',
                    dashStyle: 'ShortDash',
                    width: 2,
                    value: Plonker_STD[6],
                    zIndex: 0,
                    label : {
                        text : 'Standard time'
                    }
                }]
            },
		
            legend: {
                align: 'right',
                x: -100,
                verticalAlign: 'top',
                y: 20,
                floating: true,
                backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColorSolid) || 'white',
                borderColor: '#CCC',
                borderWidth: 1,
                shadow: false
            },
            tooltip: {
                formatter: function() {
                    return '<b>'+ this.x +'</b><br/>'+
                        this.series.name +': '+ this.y +'<br/>'+
                        'Total: '+ this.point.stackTotal;
                }
            },
            plotOptions: {
                column: {
                    stacking: 'normal'
                }
            },
            series: seriesData
        
			
			
        });
    });
    
});
});
</script>




<script type = "text/javascript">
// $('#TextBox2').change(function () {alert('changed');});
$(document).ready(function () {
    Highcharts.setOptions({
        global: {
            useUTC: false
        }
    });

    Highcharts.chart('container', {
        chart: {
            type: 'spline',
            animation: Highcharts.svg, // don't animate in old IE
            marginRight: 10,
            events: {
                load: function () {

                    // set up the updating of the chart each second
                    var series = this.series[0];
                    setInterval(function () {
                        var x = (new Date()).getTime(), // current time
                            y = Do2();
                        series.addPoint([x, y], true, true);
                    }, 2000);
                }
            }
        },
        title: {
            text: 'Pulled data'
        },
        xAxis: {
            type: 'datetime',
            tickPixelInterval: 150
        },
        yAxis: {
            title: {
                text: 'Value'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },
        tooltip: {
            formatter: function () {
                return '<b>' + this.series.name + '</b><br/>' +
                    Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x) + '<br/>' +
                    Highcharts.numberFormat(this.y, 2);
            }
        },
        legend: {
            enabled: false
        },
        exporting: {
            enabled: false
        },
        series: [{
            name: 'Random data',
            data: (function () {
                // generate an array of random data
                var data = [],
                    time = (new Date()).getTime(),
                    i;

                for (i = -19; i <= 0; i += 1) {
                    data.push({
                        x: time + i * 1000,
                        y: Math.random()
                    });
                }
                return data;
            }())
			
        }]
    });
});				
          
</script>
</body>
</html>
